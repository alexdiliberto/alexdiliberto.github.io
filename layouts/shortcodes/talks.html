{{- $title := .Get "title" -}}
{{- $class := .Get "class" | default "talks-list" -}}
{{- $items := site.Data.talks | default (slice) -}}

<section class="talks-section">
  {{ with $title }}<h2>{{ . }}</h2>{{ end }}

  {{ if gt (len $items) 0 }}
    <ul class="{{ $class }}">
      {{ range sort $items "weight" "asc" }}
        {{- $it := . -}}
        {{- $href := "" -}}
        {{- with $it.url }}        {{- $href = . -}}{{ end -}}
        {{- if and (eq $href "") ($it.slug) -}}
          {{- $href = (printf "/talks/%s/" $it.slug) | relURL -}}
        {{- end -}}
        <li>
          <a href="{{ $href }}" target="_blank" rel="noopener">
            <span>{{ $it.title }}</span>
            {{ if $it.external }}
              <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor"
                   stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                   viewBox="0 0 24 24" height="12" width="12"
                   style="margin-left:.25rem;vertical-align:text-bottom">
                <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                <path d="M15 3h6v6"></path>
                <path d="M10 14 21 3"></path>
              </svg>
            {{ end }}
          </a>
        </li>
      {{ end }}
    </ul>
  {{ else }}
    <p>No talks available.</p>
  {{ end }}
</section>
