/*!--------------------------------------------------------------------
minified ./triangles.js
-----------------------------------------------------------------------*/
var Delaunay;!function(){"use strict";var t=1/1048576;function e(e,i,n,s){var r,o,h,a,c,f,l,S,u,d,m=e[i][0],F=e[i][1],p=e[n][0],g=e[n][1],y=e[s][0],b=e[s][1],w=Math.abs(F-g),v=Math.abs(g-b);if(w<t&&v<t)throw new Error("Eek! Coincident points!");return w<t?o=(a=-(y-p)/(b-g))*((r=(p+m)/2)-(f=(p+y)/2))+(S=(g+b)/2):v<t?o=(h=-(p-m)/(g-F))*((r=(y+p)/2)-(c=(m+p)/2))+(l=(F+g)/2):(r=((h=-(p-m)/(g-F))*(c=(m+p)/2)-(a=-(y-p)/(b-g))*(f=(p+y)/2)+(S=(g+b)/2)-(l=(F+g)/2))/(h-a),o=w>v?h*(r-c)+l:a*(r-f)+S),{i:i,j:n,k:s,x:r,y:o,r:(u=p-r)*u+(d=g-o)*d}}function i(t){var e,i,n,s,r,o;for(i=t.length;i;)for(s=t[--i],n=t[--i],e=i;e;)if(o=t[--e],n===(r=t[--e])&&s===o||n===o&&s===r){t.splice(i,2),t.splice(e,2);break}}Delaunay={triangulate:function(n,s){var r,o,h,a,c,f,l,S,u,d,m,F,p=n.length;if(p<3)return[];if(n=n.slice(0),s)for(r=p;r--;)n[r]=n[r][s];for(h=new Array(p),r=p;r--;)h[r]=r;for(h.sort(function(t,e){return n[e][0]-n[t][0]}),a=function(t){var e,i,n,s,r,o,h=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(e=t.length;e--;)t[e][0]<h&&(h=t[e][0]),t[e][0]>c&&(c=t[e][0]),t[e][1]<a&&(a=t[e][1]),t[e][1]>f&&(f=t[e][1]);return n=f-a,[[(r=h+.5*(i=c-h))-20*(s=Math.max(i,n)),(o=a+.5*n)-s],[r,o+20*s],[r+20*s,o-s]]}(n),n.push(a[0],a[1],a[2]),c=[e(n,p+0,p+1,p+2)],f=[],l=[],r=h.length;r--;l.length=0){for(F=h[r],o=c.length;o--;)(S=n[F][0]-c[o].x)>0&&S*S>c[o].r?(f.push(c[o]),c.splice(o,1)):S*S+(u=n[F][1]-c[o].y)*u-c[o].r>t||(l.push(c[o].i,c[o].j,c[o].j,c[o].k,c[o].k,c[o].i),c.splice(o,1));for(i(l),o=l.length;o;)m=l[--o],d=l[--o],c.push(e(n,d,m,F))}for(r=c.length;r--;)f.push(c[r]);for(c.length=0,r=f.length;r--;)f[r].i<p&&f[r].j<p&&f[r].k<p&&c.push(f[r].i,f[r].j,f[r].k);return c}},"undefined"!=typeof module&&(module.exports=Delaunay)}(),FSS={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"},FSS.Array="function"==typeof Float32Array?Float32Array:Array,FSS.Utils={isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),s=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+s)},s);return t=n+s,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(t,e){return t+(e-t)*Math.random()},Math.clamp=function(t,e,i){return t=Math.max(t,e),t=Math.min(t,i)},FSS.Vector3={create:function(t,e,i){var n=new FSS.Array(3);return this.set(n,t,e,i),n},clone:function(t){var e=this.create();return this.copy(e,t),e},set:function(t,e,i,n){return t[0]=e||0,t[1]=i||0,t[2]=n||0,this},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],this},subtractVectors:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],this},divideScalar:function(t,e){return 0!==e?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0),this},crossVectors:function(t,e,i){return t[0]=e[1]*i[2]-e[2]*i[1],t[1]=e[2]*i[0]-e[0]*i[2],t[2]=e[0]*i[1]-e[1]*i[0],this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},normalise:function(t){return this.divideScalar(t,this.length(t))},lengthSquared:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},length:function(t){return Math.sqrt(this.lengthSquared(t))}},FSS.Vector4={create:function(t,e,i,n){var s=new FSS.Array(4);return this.set(s,t,e,i),s},set:function(t,e,i,n,s){return t[0]=e||0,t[1]=i||0,t[2]=n||0,t[3]=s||0,this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],this},multiplyVectors:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),t[3]<e&&(t[3]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),t[3]>e&&(t[3]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this}},FSS.Color=function(t,e){this.rgba=FSS.Vector4.create(),this.hex=t||"#000000",this.opacity=FSS.Utils.isNumber(e)?e:1,this.set(this.hex,this.opacity)},FSS.Color.prototype={set:function(t,e){var i=(t=t.replace("#","")).length/3;return this.rgba[0]=parseInt(t.substring(0*i,1*i),16)/255,this.rgba[1]=parseInt(t.substring(1*i,2*i),16)/255,this.rgba[2]=parseInt(t.substring(2*i,3*i),16)/255,this.rgba[3]=FSS.Utils.isNumber(e)?e:this.rgba[3],this},hexify:function(t){var e=Math.ceil(255*t).toString(16);return 1===e.length&&(e="0"+e),e},format:function(){var t=this.hexify(this.rgba[0]),e=this.hexify(this.rgba[1]),i=this.hexify(this.rgba[2]);return this.hex="#"+t+e+i,this.hex}},FSS.Object=function(){this.position=FSS.Vector3.create()},FSS.Object.prototype={setPosition:function(t,e,i){return FSS.Vector3.set(this.position,t,e,i),this}},FSS.Light=function(t,e){FSS.Object.call(this),this.ambient=new FSS.Color(t||"#FFFFFF"),this.diffuse=new FSS.Color(e||"#FFFFFF"),this.ray=FSS.Vector3.create()},FSS.Light.prototype=Object.create(FSS.Object.prototype),FSS.Vertex=function(t,e,i){this.position=FSS.Vector3.create(t,e,i)},FSS.Vertex.prototype={setPosition:function(t,e,i){return FSS.Vector3.set(this.position,t,e,i),this}},FSS.Triangle=function(t,e,i){this.a=t||new FSS.Vertex,this.b=e||new FSS.Vertex,this.c=i||new FSS.Vertex,this.vertices=[this.a,this.b,this.c],this.u=FSS.Vector3.create(),this.v=FSS.Vector3.create(),this.centroid=FSS.Vector3.create(),this.normal=FSS.Vector3.create(),this.color=new FSS.Color,this.polygon=document.createElementNS(FSS.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},FSS.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],FSS.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return FSS.Vector3.subtractVectors(this.u,this.b.position,this.a.position),FSS.Vector3.subtractVectors(this.v,this.c.position,this.a.position),FSS.Vector3.crossVectors(this.normal,this.u,this.v),FSS.Vector3.normalise(this.normal),this}},FSS.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},FSS.Geometry.prototype={update:function(){if(this.dirty){var t,e;for(t=this.triangles.length-1;t>=0;t--)(e=this.triangles[t]).computeCentroid(),e.computeNormal();this.dirty=!1}return this}},FSS.Plane=function(t,e,i){FSS.Geometry.call(this),this.width=t||100,this.height=e||100;var n,s,r=new Array(i);for(offsetX=-.5*this.width,offsetY=.5*this.height,o=r.length;o--;)n=offsetX+Math.random()*t,s=offsetY-Math.random()*e,r[o]=[n,s];r.push([offsetX,offsetY]),r.push([offsetX+t/2,offsetY]),r.push([offsetX+t,offsetY]),r.push([offsetX+t,offsetY-e/2]),r.push([offsetX+t,offsetY-e]),r.push([offsetX+t/2,offsetY-e]),r.push([offsetX,offsetY-e]),r.push([offsetX,offsetY-e/2]);for(var o=6;o>=0;o--)r.push([offsetX+Math.random()*t,offsetY]),r.push([offsetX,offsetY-Math.random()*e]),r.push([offsetX+t,offsetY-Math.random()*e]),r.push([offsetX+Math.random()*t,offsetY-e]);var h=Delaunay.triangulate(r);for(o=h.length;o;)--o,v1=new FSS.Vertex(Math.ceil(r[h[o]][0]),Math.ceil(r[h[o]][1])),--o,v2=new FSS.Vertex(Math.ceil(r[h[o]][0]),Math.ceil(r[h[o]][1])),--o,v3=new FSS.Vertex(Math.ceil(r[h[o]][0]),Math.ceil(r[h[o]][1])),t1=new FSS.Triangle(v1,v2,v3),this.triangles.push(t1),this.vertices.push(v1),this.vertices.push(v2),this.vertices.push(v3)},FSS.Plane.prototype=Object.create(FSS.Geometry.prototype),FSS.Material=function(t,e){this.ambient=new FSS.Color(t||"#444444"),this.diffuse=new FSS.Color(e||"#FFFFFF"),this.slave=new FSS.Color},FSS.Mesh=function(t,e){FSS.Object.call(this),this.geometry=t||new FSS.Geometry,this.material=e||new FSS.Material,this.side=FSS.FRONT,this.visible=!0},FSS.Mesh.prototype=Object.create(FSS.Object.prototype),FSS.Mesh.prototype.update=function(t,e){var i,n,s,r,o;if(this.geometry.update(),e)for(i=this.geometry.triangles.length-1;i>=0;i--){for(n=this.geometry.triangles[i],FSS.Vector4.set(n.color.rgba),s=t.length-1;s>=0;s--)r=t[s],FSS.Vector3.subtractVectors(r.ray,r.position,n.centroid),FSS.Vector3.normalise(r.ray),o=FSS.Vector3.dot(n.normal,r.ray),this.side===FSS.FRONT?o=Math.max(o,0):this.side===FSS.BACK?o=Math.abs(Math.min(o,0)):this.side===FSS.DOUBLE&&(o=Math.max(Math.abs(o),0)),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,r.ambient.rgba),FSS.Vector4.add(n.color.rgba,this.material.slave.rgba),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,r.diffuse.rgba),FSS.Vector4.multiplyScalar(this.material.slave.rgba,o),FSS.Vector4.add(n.color.rgba,this.material.slave.rgba);FSS.Vector4.clamp(n.color.rgba,0,1)}return this},FSS.Scene=function(){this.meshes=[],this.lights=[]},FSS.Scene.prototype={add:function(t){return t instanceof FSS.Mesh&&!~this.meshes.indexOf(t)?this.meshes.push(t):t instanceof FSS.Light&&!~this.lights.indexOf(t)&&this.lights.push(t),this},remove:function(t){return t instanceof FSS.Mesh&&~this.meshes.indexOf(t)?this.meshes.splice(this.meshes.indexOf(t),1):t instanceof FSS.Light&&~this.lights.indexOf(t)&&this.lights.splice(this.lights.indexOf(t),1),this}},FSS.Renderer=function(){this.width=0,this.height=0,this.halfWidth=0,this.halfHeight=0},FSS.Renderer.prototype={setSize:function(t,e){if(this.width!==t||this.height!==e)return this.width=t,this.height=e,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this},clear:function(){return this},render:function(t){return this}},FSS.CanvasRenderer=function(){FSS.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},FSS.CanvasRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.CanvasRenderer.prototype.setSize=function(t,e){return FSS.Renderer.prototype.setSize.call(this,t,e),this.element.width=t,this.element.height=e,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},FSS.CanvasRenderer.prototype.clear=function(){return FSS.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},FSS.CanvasRenderer.prototype.render=function(t){var e,i,n,s,r;for(FSS.Renderer.prototype.render.call(this,t),this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,e=t.meshes.length-1;e>=0;e--)if((i=t.meshes[e]).visible)for(i.update(t.lights,!0),n=i.geometry.triangles.length-1;n>=0;n--)r=(s=i.geometry.triangles[n]).color.format(),this.context.beginPath(),this.context.moveTo(s.a.position[0],s.a.position[1]),this.context.lineTo(s.b.position[0],s.b.position[1]),this.context.lineTo(s.c.position[0],s.c.position[1]),this.context.closePath(),this.context.strokeStyle=r,this.context.fillStyle=r,this.context.stroke(),this.context.fill();return this},function(){var t,e,i,n,s,r,o={width:1.2,height:1.2,slices:250,depth:100,maxdepth:200,ambient:"#555555",diffuse:"#FFFFFF"},h={xPos:0,yPos:-166,zOffset:100,ambient:"#FFFFFF",diffuse:"#5dc76f",proxy:!1,randomize:function(){var t,i,n;for(l=e.lights.length-1;l>=0;l--)t=Math.randomInRange(-200,200),i=h.yPos,n=h.zOffset,light=e.lights[l],FSS.Vector3.set(light.position,t,i,n),light.diffuse.set(h.diffuse),light.diffuseHex=light.diffuse.format(),light.ambient.set(h.ambient),light.ambientHex=light.ambient.format()}},a=FSS.Vector3.create(),c=document.getElementById("header-triangles-wrapper"),f=document.getElementById("output");function S(){var r,h;for(e.remove(i),t.clear(),n=new FSS.Plane(o.width*t.width,o.height*t.height,o.slices),s=new FSS.Material(o.ambient,o.diffuse),i=new FSS.Mesh(n,s),e.add(i),r=n.vertices.length-1;r>=0;r--)(h=n.vertices[r]).depth=Math.randomInRange(0,o.maxdepth/10),h.anchor=FSS.Vector3.clone(h.position)}function u(e,i,n){t.setSize(e,i),FSS.Vector3.set(a,t.halfWidth,t.halfHeight),n||S()}function d(){!function(){var t,e,i=o.depth/100;for(t=n.vertices.length-1;t>=0;t--)e=n.vertices[t],FSS.Vector3.set(e.position,1,1,e.depth*i),FSS.Vector3.add(e.position,e.anchor);n.dirty=!0}(),m(),requestAnimationFrame(d)}function m(){t.render(e)}function F(e){t.width===c.offsetWidth&&t.height===c.offsetHeight||(u(c.offsetWidth,c.offsetHeight,!1),m())}function p(e){h.xPos=(e.x||e.clientX)-t.width/2,h.yPos=t.height/2-(e.y||e.clientY),h.proxy.setPosition(h.xPos,h.yPos,h.proxy.position[2])}r=new FSS.CanvasRenderer,t&&f.removeChild(t.element),(t=r).setSize(c.offsetWidth,c.offsetHeight),f.appendChild(t.element),e=new FSS.Scene,S(),t.clear(),light=new FSS.Light(h.ambient,h.diffuse),light.ambientHex=light.ambient.format(),light.diffuseHex=light.diffuse.format(),light.setPosition(h.xPos,h.yPos,h.zOffset),e.add(light),h.proxy=light,window.addEventListener("resize",F),c.addEventListener("mousemove",p),h.randomize(),u(c.offsetWidth,c.offsetHeight,!0),d()}();
